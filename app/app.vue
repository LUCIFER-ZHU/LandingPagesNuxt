<template>
  <NuxtLayout>
    <NuxtPage />
  </NuxtLayout>
</template>

<script setup lang="ts">
// ä½¿ç”¨å›¾ç‰‡URLç®¡ç†composable
const { buildImageUrl } = useImageUrl();

/**
 * åº”ç”¨å…¥å£æ–‡ä»¶
 * è®¾ç½®å…¨å±€é…ç½®å’Œæ ·å¼
 * */

// åˆå§‹åŒ–è®¤è¯çŠ¶æ€ï¼ˆä» Cookie æ¢å¤ï¼‰
const authStore = useAuthStore()

// åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½åˆå§‹åŒ–è®¤è¯çŠ¶æ€
authStore.initFromCookie()

console.log('ğŸš€ App.vue - è®¤è¯çŠ¶æ€å·²åˆå§‹åŒ–:', {
  isLoggedIn: authStore.isLoggedIn,
  user: authStore.user,
  isServer: process.server,
  isClient: process.client
})

// ä½¿ç”¨ useHead æ·»åŠ é¢å¤–çš„ meta æ ‡ç­¾å’Œ Google Analytics è·Ÿè¸ªä»£ç 
useHead({
  htmlAttrs: {
    lang: 'en'
  },
  meta: [
    { charset: 'utf-8' },
    { name: 'viewport', content: 'width=device-width, initial-scale=1' },
    { name: 'format-detection', content: 'telephone=no' },
    { name: 'theme-color', content: '#092991' },
    { name: 'msapplication-TileColor', content: '#092991' },
    { name: 'apple-mobile-web-app-status-bar-style', content: 'default' },
    { name: 'apple-mobile-web-app-title', content: 'MINNUO Group' },
    { name: 'application-name', content: 'MINNUO Group' },
  ],
  link: [
    // é¢„åŠ è½½LCPå…³é”®å›¾ç‰‡èµ„æº
    // { 
    //   rel: 'preload', 
    //   as: 'image', 
    //   href: buildImageUrl('/image/img3.webp'), 
    //   fetchpriority: 'high' 
    // },
  ]
  // Note: Google Analytics is now loaded by the Cookie Consent plugin
  // only when the user accepts analytics cookies (GDPR compliant)
})
</script>

<style>
</style>